function Swipe(t,n){"use strict";function e(){if(p=g.children,E=p.length,p.length<2&&(n.continuous=!1),f.transitions&&n.continuous&&p.length<3&&(g.appendChild(p[0].cloneNode(!0)),g.appendChild(p[1].cloneNode(!0)),p=g.children),w=new Array(p.length),"x"==n.slideDirection){m=t.getBoundingClientRect().width||t.offsetWidth,g.style.width=p.length*m+"px";for(var e=p.length;e--;){var i=p[e];i.style.width=m+"px",i.setAttribute("data-index",e),f.transitions&&(i.style.left=e*-m+"px",a(e,y>e?-m:y<e?m:0,0))}f.transitions||(g.style.left=y*-width+"px")}else{m=t.getBoundingClientRect().height||t.offsetHeight,g.style.height=p.length*m+"px";for(var e=p.length;e--;){var i=p[e];i.style.height=m+"px",i.setAttribute("data-index",e),f.transitions&&(i.style.top=e*-m+"px",a(e,y>e?-m:y<e?m:0,0))}f.transitions||(g.style.top=y*-m+"px")}n.continuous&&f.transitions&&(a(s(y-1),-m,0),a(s(y+1),m,0)),t.style.visibility="visible"}function i(){n.continuous?r(y-1):y&&r(y-1)}function o(){n.continuous?r(y+1):y<p.length-1&&r(y+1)}function s(t){return(p.length+t%p.length)%p.length}function r(t,e){if(y!=t){if(f.transitions){var i=Math.abs(y-t)/(y-t);if(n.continuous){var o=i;i=-w[s(t)]/m,i!==o&&(t=-i*p.length+t)}for(var r=Math.abs(y-t)-1;r--;)a(s((t>y?t:y)-r-1),m*i,0);t=s(t),a(y,m*i,e||b),a(t,0,e||b),n.continuous&&a(s(t-i),-(m*i),0)}else t=s(t),c(y*-m,t*-m,e||b);y=t,v(n.callback&&n.callback(y,p[y]))}}function a(t,n,e){u(t,n,e),w[t]=n}function u(t,e,i){var o=p[t],s=o&&o.style;s&&(s.webkitTransitionDuration=s.MozTransitionDuration=s.msTransitionDuration=s.OTransitionDuration=s.transitionDuration=i+"ms","x"==n.slideDirection?(s.webkitTransform="translate("+e+"px,0)translateZ(0)",s.msTransform=s.MozTransform=s.OTransform="translate("+e+"px)"):(s.webkitTransform="translate(0,"+e+"px)translateZ(0)",s.msTransform=s.MozTransform=s.OTransform="translate(0,"+e+"px)"))}function c(t,e,i){if(!i)return void(g.style.left=e+"px");var o=+new Date,s=setInterval(function(){var r=+new Date-o;return r>i?(g.style.left=e+"px",x&&d(),n.transitionEnd&&n.transitionEnd.call(event,y,p[y]),void clearInterval(s)):void(g.style.left=(e-t)*(Math.floor(r/i*100)/100)+t+"px")},4)}function d(){T=setTimeout(o,x)}function l(){x=0,clearTimeout(T)}var h=function(){},v=function(t){setTimeout(t||h,0)},f={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(t){var n=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var e in n)if(void 0!==t.style[n[e]])return!0;return!1}(document.createElement("swipe"))};if(t){var p,w,m,E,g=t.children[0];n=n||{};var y=parseInt(n.startSlide,10)||0,b=n.speed||300;n.continuous=void 0===n.continuous||n.continuous,n.slideDirection=n.slideDirection||"x";var T,x=n.auto||0,L={},D={},k=!1,M=0,z={handleEvent:function(t){switch(t.type){case"touchstart":this.start(t);break;case"touchmove":this.move(t);break;case"touchend":v(this.end(t));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":v(this.transitionEnd(t));break;case"resize":v(e)}n.stopPropagation&&t.stopPropagation()},start:function(t){x||(M=0);var n=t.touches[0];L={x:n.pageX,y:n.pageY,time:+new Date},D={},g.addEventListener("touchmove",this,!1),g.addEventListener("touchend",this,!1)},move:function(t){if(!(t.touches.length>1||t.scale&&1!==t.scale)){n.disableScroll&&t.preventDefault();var e=t.touches[0];D={x:e.pageX-L.x,y:e.pageY-L.y},"x"==n.slideDirection&&(k=!!(Math.abs(D.x)>Math.abs(D.y))),"y"==n.slideDirection&&(k=!!(Math.abs(D.y)>Math.abs(D.x))),k&&(M=D[n.slideDirection],t.preventDefault(),l(),n.continuous?(u(s(y-1),M+w[s(y-1)],0),u(y,M+w[y],0),u(s(y+1),M+w[s(y+1)],0)):(M/=!y&&M>0||y==p.length-1&&M<0?Math.abs(M)/m+1:1,u(y-1,M+w[y-1],0),u(y,M+w[y],0),u(y+1,M+w[y+1],0)))}},end:function(t){var e=+new Date-L.time,i=Number(e)<250&&Math.abs(M)>20||Math.abs(M)>m/2,o=!y&&M>0||y==p.length-1&&M<0;n.continuous&&(o=!1);var r=M<0;i&&!o?(r?(n.continuous?(a(s(y-1),-m,0),a(s(y+2),m,0)):a(y-1,-m,0),a(y,w[y]-m,b),a(s(y+1),w[s(y+1)]-m,b),y=s(y+1)):(n.continuous?(a(s(y+1),m,0),a(s(y-2),-m,0)):a(y+1,m,0),a(y,w[y]+m,b),a(s(y-1),w[s(y-1)]+m,b),y=s(y-1)),n.callback&&n.callback(y,p[y])):n.continuous?(a(s(y-1),-m,b),a(y,0,b),a(s(y+1),m,b)):(a(y-1,-m,b),a(y,0,b),a(y+1,m,b)),g.removeEventListener("touchmove",z,!1),g.removeEventListener("touchend",z,!1),k=!1},transitionEnd:function(t){parseInt(t.target.getAttribute("data-index"),10)==y&&(x&&d(),n.transitionEnd&&n.transitionEnd.call(t,y,p[y]))}};return e(),x&&d(),f.addEventListener?(f.touch&&g.addEventListener("touchstart",z,!1),f.transitions&&(g.addEventListener("webkitTransitionEnd",z,!1),g.addEventListener("msTransitionEnd",z,!1),g.addEventListener("oTransitionEnd",z,!1),g.addEventListener("otransitionend",z,!1),g.addEventListener("transitionend",z,!1)),window.addEventListener("resize",z,!1)):window.onresize=function(){e()},window.slidePos=w,{setup:function(){e()},slide:function(t,n){l(),r(t,n)},prev:function(){l(),i()},next:function(){l(),o()},stop:function(){l()},getPos:function(){return y},getNumSlides:function(){return E},kill:function(){if(l(),"x"===n.slideDirection){g.style.width="",g.style.left="";for(var t=p.length;t--;){var e=p[t];e.style.width="",e.style.left="",f.transitions&&u(t,0,0)}}else{g.style.height="",g.style.top="";for(var t=p.length;t--;){var e=p[t];e.style.height="",e.style.top="",f.transitions&&u(t,0,0)}}f.addEventListener?(g.removeEventListener("touchstart",z,!1),g.removeEventListener("webkitTransitionEnd",z,!1),g.removeEventListener("msTransitionEnd",z,!1),g.removeEventListener("oTransitionEnd",z,!1),g.removeEventListener("otransitionend",z,!1),g.removeEventListener("transitionend",z,!1),window.removeEventListener("resize",z,!1)):window.onresize=null}}}}(window.jQuery||window.Zepto)&&!function(t){t.fn.Swipe=function(n){return this.each(function(){t(this).data("Swipe",new Swipe(t(this)[0],n))})}}(window.jQuery||window.Zepto);